/* RequireJS i18next Plugin v0.4.0 | (c) 2013-2014 Jacob van Mourik | MIT Licensed */
define(["i18next"],function(a){"use strict";var b,c={},d=a.functions,e=a.options;return b={version:"0.4.0",pluginBuilder:"./i18next-builder",resourceExists:function(a,b,d){return c[a]&&c[a][b]&&c[a][b][d]},addResource:function(a,b,d,e){c[a]=c[a]||{},c[a][b]=c[a][b]||{},c[a][b][d]=e},getResources:function(a,b){var e={};return d.each(c,function(f){c[f][a]&&c[f][a][b]&&d.extend(e,c[f][a][b])}),e},parseName:function(a){var b=a.split(":");return{module:b[0],namespaces:b[1]?b[1].split(","):[]}},load:function(c,f,g,h){var i=b.parseName(c),j=d.extend({},h.i18next),k=i.namespaces,l=i.module,m=j.supportedLngs;m&&m[l]&&(m=m[l]),"string"==typeof e.ns?(k.unshift(j.ns||e.ns),j.ns={defaultNs:k[0],namespaces:k}):(j.ns=e.ns,d.each(k,function(a,b){-1==j.ns.namespaces.indexOf(b)&&j.ns.namespaces.push(b)})),j.customLoad=function(a,c,e,g){if(b.resourceExists(l,a,c))return void g(null,b.getResources(a,c));if(m&&(!m[a]||-1==m[a].indexOf(c)))return d.log("no locale support found for "+a+" with namespace "+c),void g(null,{});var h=f.toUrl(l+("/"!==l.substr(l.length-1)?"/":"")+d.applyReplacement(e.resGetPath,{lng:a,ns:c}));d.ajax({url:h,dataType:"json",async:e.async,success:function(e){b.addResource(l,a,c,e),d.log("loaded: "+h),g(null,b.getResources(a,c))},error:function(a,b,c){d.log("failed loading: "+h),g(c,{})}})},delete j.supportedLngs,a.init(j,function(){g(a)})}}});