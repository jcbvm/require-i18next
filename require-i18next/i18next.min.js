/* RequireJS i18next Plugin v0.4.0 | (c) 2013-2014 Jacob van Mourik | MIT Licensed */
define(["i18next"],function(a){"use strict";var b,c,d={},e=a.functions,f=a.options;return b={version:"0.4.0",pluginBuilder:"./i18next-builder",resourceExists:function(a,b,c){return d[a]&&d[a][b]&&d[a][b][c]},addResource:function(a,b,c,e){d[a]=d[a]||{},d[a][b]=d[a][b]||{},d[a][b][c]=e},getResources:function(a,b){var c={};return e.each(d,function(f){d[f][a]&&d[f][a][b]&&e.extend(c,d[f][a][b])}),c},parseName:function(a){var b=a.split(":");return{resPath:b[0]+(/\/$/.test(b[0])?"":"/"),namespaces:b[1]?b[1].split(","):[]}},load:function(d,g,h,i){var j,k,l=e.extend({},i.i18next),m=b.parseName(d),n=m.resPath;l.supportedLngs&&(j=l.supportedLngs[n]||l.supportedLngs[n.replace(/\/$/,"")]||l.supportedLngs),c||(c=l.ns&&"string"!=typeof l.ns?l.ns.namespaces:[l.ns||f.ns]),k=c.slice(),e.each(m.namespaces,function(a,b){-1==k.indexOf(b)&&k.push(b)}),"string"==typeof f.ns?l.ns={defaultNs:k[0],namespaces:k}:(l.ns=e.extend({},f.ns),e.each(k,function(a,b){-1==l.ns.namespaces.indexOf(b)&&l.ns.namespaces.push(b)})),l.customLoad=function(c,d,f,h){var i=(f.ns.defaultNs,!0);return-1==k.indexOf(d)?i=!1:b.resourceExists(n,c,d)?i=!1:!j||j[c]&&-1!=j[c].indexOf(d)||(e.log("no locale support found for "+c+" with namespace "+d),i=!1),i?(f=e.extend({},f),f.resGetPath=g.toUrl(n+f.resGetPath),void a.sync._fetchOne(c,d,f,function(a,e){b.addResource(n,c,d,e),h(a,b.getResources(c,d))})):void h(null,b.getResources(c,d))},delete l.supportedLngs,a.init(l,function(){h(a)})}}});